---
name: teamwork-status
description: "Dashboard view of teamwork project status"
argument-hint: "[--project NAME] [--team NAME] [--verbose] | --help"
allowed-tools: ["Bash", "Read", "Glob"]
---

# Teamwork Status Command

## Overview

Display a dashboard-style status view of a teamwork project.

---

## Step 1: Parse Arguments

Parse options:
- `--project NAME`: Override project detection
- `--team NAME`: Override sub-team detection
- `--verbose`: Show task details

Detect project/team:
```bash
# Default detection
PROJECT=$(basename "$(git rev-parse --show-toplevel 2>/dev/null)" || echo "unknown")
SUB_TEAM=$(git rev-parse --abbrev-ref HEAD 2>/dev/null | tr '/' '-' || echo "main")

# Check for overrides in arguments
```

Teamwork directory: `~/.claude/teamwork/{PROJECT}/{SUB_TEAM}/`

## Step 2: Display Status Dashboard

Call the project-status.js script to display the comprehensive status dashboard:

```bash
SCRIPTS="${CLAUDE_PLUGIN_ROOT}/src/scripts"

# Basic dashboard (table format)
bun "${SCRIPTS}/project-status.js" --project "${PROJECT}" --team "${SUB_TEAM}" --format table

# With verbose output (show all task details)
bun "${SCRIPTS}/project-status.js" --project "${PROJECT}" --team "${SUB_TEAM}" --format table --verbose

# JSON output (for programmatic use)
bun "${SCRIPTS}/project-status.js" --project "${PROJECT}" --team "${SUB_TEAM}" --format json
```

The script automatically handles:
- Project existence check (exits with error if not found)
- Reading project.json, tasks/, waves.json, verification/ files
- Calculating statistics (total, open, in-progress, resolved)
- Role-based completion tracking
- Wave progress and verification (if waves.json exists)
- Active worker display
- Blocked task detection

**If project doesn't exist:**
```
Error: Project not found: {PROJECT}/{SUB_TEAM}
```

Exit with code 1. Suggest running: `/teamwork "your goal"`

## Step 3: Display Dashboard Output

**Render:**

```markdown
═══════════════════════════════════════════════════════════
 TEAMWORK STATUS
═══════════════════════════════════════════════════════════

 Project: {PROJECT}
 Sub-team: {SUB_TEAM}
 Goal: {goal}

───────────────────────────────────────────────────────────
 PROGRESS
───────────────────────────────────────────────────────────

 ████████████░░░░░░░░ 60% (6/10)

 Open:       3 tasks
 In Progress: 1 task
 Completed:  6 tasks

{If waves.json exists:}
───────────────────────────────────────────────────────────
 WAVE PROGRESS
───────────────────────────────────────────────────────────

 Wave 1: ✅ VERIFIED   (3/3 tasks, 100%)
 Wave 2: ✅ VERIFIED   (5/5 tasks, 100%)
 Wave 3: ⏳ IN PROGRESS (2/4 tasks, 50%)
         Task 7: ✓ resolved
         Task 8: ◐ in progress (session-abc)
         Task 9: ○ open
         Task 10: ○ open
 Wave 4: ⏸️  PENDING    (0/2 tasks, 0%)
         (blocked by Wave 3)

 Overall: Wave 3/4 active

{If verification files exist:}
───────────────────────────────────────────────────────────
 VERIFICATION
───────────────────────────────────────────────────────────

 Wave 1: ✅ PASS (verified 2026-01-15 10:30)
         - Build passed
         - Tests passed (15/15)
         - No conflicts

 Wave 2: ✅ PASS (verified 2026-01-15 11:45)
         - Build passed
         - Tests passed (23/23)
         - No conflicts

 Wave 3: (in progress, not yet verified)

───────────────────────────────────────────────────────────
 BY ROLE
───────────────────────────────────────────────────────────

 backend:   ████████████████████ 100% (3/3) ✓
 frontend:  ████████░░░░░░░░░░░░  40% (2/5)
 test:      ░░░░░░░░░░░░░░░░░░░░   0% (0/2)

───────────────────────────────────────────────────────────
 ACTIVE WORKERS
───────────────────────────────────────────────────────────

 session-abc: #7 Build login form (5m ago)
 session-xyz: #9 Add unit tests (2m ago)

───────────────────────────────────────────────────────────
 BLOCKED TASKS
───────────────────────────────────────────────────────────

 #10 Integration tests - blocked by: #7, #8

───────────────────────────────────────────────────────────
 COMMANDS
───────────────────────────────────────────────────────────

 /teamwork-worker              Start working on tasks
 /teamwork-worker --loop       Continuous worker mode
 /teamwork-worker --strict     Strict evidence mode (for waves)
 /teamwork-status --verbose    Show task details

═══════════════════════════════════════════════════════════

{Wave-based projects show additional sections:}
- WAVE PROGRESS: Shows wave-by-wave execution status
- VERIFICATION: Shows verification results for completed waves
```

## Step 3: Verbose Mode

If `--verbose` flag is provided, the dashboard includes additional sections:
- **Wave task details**: Per-task status within each wave
- **Verification details**: Individual check results with evidence
- **All tasks table**: Comprehensive task listing with status icons

The verbose output is automatically generated by the project-status.js script.

---

## Options Reference

| Option | Description |
|--------|-------------|
| `--project NAME` | Override project name |
| `--team NAME` | Override sub-team name |
| `--verbose` | Show detailed task list |
